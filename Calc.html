<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>5:15 Carrusel Monte Alto – Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #0f1115;
      --card-bg: #1a1d23;
      --accent: #ffd54a;
      --radius-xl: 26px;
      --shadow-soft: 0 20px 40px rgba(0, 0, 0, 0.5);
      --text-main: #f7f5ff;
      --text-muted: #a0a3b5;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #252735 0, #05060a 60%);
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Roboto", sans-serif;
      color: var(--text-main);
    }

    .carousel-shell {
      width: 100%;
      max-width: 420px;
      padding: 16px;
      position: relative;
    }

    .carousel-viewport {
      position: relative;
      overflow: visible; /* ver vecinos */
      padding: 8px 0;
    }

    .carousel-viewport::before,
    .carousel-viewport::after {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      width: 40px;
      pointer-events: none;
      z-index: 3;
    }

    .carousel-viewport::before {
      left: 0;
      background: linear-gradient(
        to right,
        var(--bg) 0%,
        rgba(15, 17, 21, 0) 100%
      );
    }

    .carousel-viewport::after {
      right: 0;
      background: linear-gradient(
        to left,
        var(--bg) 0%,
        rgba(15, 17, 21, 0) 100%
      );
    }

    .carousel-track {
      display: flex;
      gap: 16px;
      transition: transform 0.45s ease;
      will-change: transform;
    }

    .slide {
      flex: 0 0 80%;
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      padding: 14px;
      box-shadow: var(--shadow-soft);
      position: relative;
      transform-origin: center center;
      transition:
        transform 0.35s ease,
        opacity 0.35s ease,
        box-shadow 0.35s ease;
      opacity: 0.25;
      transform: scale(0.9);
    }

    .slide.active {
      opacity: 1;
      transform: scale(1);
      box-shadow: 0 26px 55px rgba(0, 0, 0, 0.65);
    }

    .slide.prev,
    .slide.next {
      opacity: 0.55;
      transform: scale(0.95);
    }

    .slide-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 8px;
    }

    .slide-title {
      font-size: 18px;
      font-weight: 700;
    }

    .slide-price {
      font-size: 14px;
      font-weight: 600;
      color: var(--accent);
      text-align: right;
    }

    .slide-tagline {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .slide-image {
      border-radius: 22px;
      overflow: hidden;
      background: radial-gradient(circle at top, #f6e1c8 0, #b57435 60%, #5c2c08 100%);
      height: 160px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
    }

    .slide-image img {
      width: 110%;
      height: auto;
      object-fit: cover;
      transform: translateY(4px);
    }

    .slide-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--text-muted);
      gap: 8px;
    }

    .slide-footer strong {
      color: var(--text-main);
    }

    /* Flechas encima del carrusel */
    .arrow-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: radial-gradient(circle at 30% 20%, #2a2d35 0, #090b10 70%);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 4;
      color: var(--text-main);
      font-size: 18px;
    }

    .arrow-btn:active {
      transform: translateY(-50%) scale(0.96);
    }

    .arrow-prev {
      left: -6px;
    }

    .arrow-next {
      right: -6px;
    }

    .dots {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 6px;
      font-size: 0;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #3b3f4a;
      transition: background 0.2s, transform 0.2s;
    }

    .dot.active {
      background: var(--accent);
      transform: scale(1.4);
    }
  </style>
</head>
<body>
<div class="carousel-shell">
  <div class="carousel-viewport">
    <div class="carousel-track" id="carouselTrack">
      <!-- Slides generados con JS -->
    </div>

    <button class="arrow-btn arrow-prev" id="prevBtn" aria-label="Anterior">
      ‹
    </button>
    <button class="arrow-btn arrow-next" id="nextBtn" aria-label="Siguiente">
      ›
    </button>
  </div>

  <div class="dots" id="dots"></div>
</div>

<script>
  // Productos Monte Alto – DEMO
  const PRODUCTS = [
    {
      id: "texmex",
      nombre: "Tex-Mex",
      precioKg: 8500,
      tagline: "Chorizo artesanal picante",
      desc: "Molienda fresca con especias tostadas y un toque ahumado.",
      rinde: "Rinde 3–4 porciones",
      img: "Tex-Mex.png"
    },
    {
      id: "caribeno",
      nombre: "Caribeño",
      precioKg: 8700,
      tagline: "Coco natural + chile panameño",
      desc: "Ajo fresco, coco natural y chile panameño estilo costero.",
      rinde: "Perfecto para 3 platos",
      img: "Caribeño.png"
    },
    {
      id: "tico",
      nombre: "Chorizo Costarricense Casero",
      precioKg: 8300,
      tagline: "Achiote, ajo y tradición local",
      desc: "Receta casera con achiote, ajo fresco y especias ticas.",
      rinde: "Ideal para desayunos y choripanes",
      img: "Criollo.png"
    },
    {
      id: "argentino",
      nombre: "Criollo Argentino",
      precioKg: 8300,
      tagline: "Clásico para parrilla",
      desc: "Posta y panceta en equilibrio, sabor limpio y jugoso.",
      rinde: "Ideal para la parrilla",
      img: "Argentino.png"
    },
    {
      id: "bratwurst",
      nombre: "Bratwurst",
      precioKg: 8900,
      tagline: "Suave, mantecoso, estilo alemán",
      desc: "Suave, jugoso, perfecto para hot dogs premium.",
      rinde: "Para 3–4 panes",
      img: "Bratwurst.png"
    },
    {
      id: "tocineta",
      nombre: "Tocineta Ahumada",
      precioKg: 10000,
      tagline: "Laminada, ahumada en frío",
      desc: "Tocineta ahumada lentamente, ideal para desayunos y burgers.",
      rinde: "Rinde varias preparaciones",
      img: "Tocineta.png"
    },
    {
      id: "combo",
      nombre: "Combo surtido Monte Alto",
      precioKg: 0, // se maneja como combo, no por kg
      tagline: "500 g de cada chorizo",
      desc: "Degustación completa: Tex-Mex, Caribeño, Tico, Argentino y Bratwurst.",
      rinde: "Pack de aprox. 2.5 kg",
      img: "Combo.png"
    }
  ];

  const track = document.getElementById("carouselTrack");
  const dotsContainer = document.getElementById("dots");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");

  let currentIndex = 0;
  let slides = [];
  let gapPx = 16; // mismo que en el CSS

  function formatoColones(valor) {
    return "₡" + valor.toLocaleString("es-CR");
  }

  function createSlides() {
    PRODUCTS.forEach((p, idx) => {
      const slide = document.createElement("article");
      slide.className = "slide";
      slide.dataset.index = idx.toString();

      const priceText =
        p.precioKg && p.precioKg > 0
          ? `${formatoColones(p.precioKg)} / kg`
          : "Combo surtido";

      slide.innerHTML = `
        <div class="slide-header">
          <div class="slide-title">${p.nombre}</div>
          <div class="slide-price">${priceText}</div>
        </div>
        <div class="slide-tagline">${p.tagline}</div>
        <div class="slide-image">
          <img src="${p.img}" alt="${p.nombre}">
        </div>
        <div class="slide-footer">
          <span>${p.desc}</span>
          <span><strong>${p.rinde}</strong></span>
        </div>
      `;

      slide.addEventListener("click", () => {
        const idx = Number(slide.dataset.index);
        if (idx !== currentIndex) {
          currentIndex = idx;
          updateCarousel();
        }
      });

      track.appendChild(slide);
    });

    slides = Array.from(track.querySelectorAll(".slide"));

    // Dots
    PRODUCTS.forEach((_p, idx) => {
      const d = document.createElement("div");
      d.className = "dot";
      d.dataset.index = idx.toString();
      d.addEventListener("click", () => {
        currentIndex = idx;
        updateCarousel();
      });
      dotsContainer.appendChild(d);
    });
  }

  function updateClasses() {
    slides.forEach((s) => {
      s.classList.remove("active", "prev", "next");
    });

    const total = slides.length;
    const prevIndex = (currentIndex - 1 + total) % total;
    const nextIndex = (currentIndex + 1) % total;

    slides[currentIndex].classList.add("active");
    slides[prevIndex].classList.add("prev");
    slides[nextIndex].classList.add("next");
  }

  function updateDots() {
    const dots = Array.from(dotsContainer.querySelectorAll(".dot"));
    dots.forEach((d, idx) => {
      d.classList.toggle("active", idx === currentIndex);
    });
  }

  function updateTrackPosition() {
    if (!slides.length) return;
    const first = slides[0];
    const slideWidth = first.getBoundingClientRect().width;
    const offset = currentIndex * (slideWidth + gapPx);
    track.style.transform = `translateX(-${offset}px)`;
  }

  function updateCarousel() {
    updateClasses();
    updateDots();
    updateTrackPosition();
  }

  prevBtn.addEventListener("click", () => {
    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
    updateCarousel();
  });

  nextBtn.addEventListener("click", () => {
    currentIndex = (currentIndex + 1) % slides.length;
    updateCarousel();
  });

  window.addEventListener("resize", () => {
    updateTrackPosition();
  });

  // Inicialización
  createSlides();
  updateCarousel();
</script>
</body>
</html>
