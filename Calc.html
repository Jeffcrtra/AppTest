<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>5:40 Monte Alto ‚Äì Calculadora (Lab Carrusel)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg-main: #05060a;
      --bg-card-top: #191c24;
      --bg-card-bottom: #11131a;
      --accent: #ffd54a;
      --accent-soft: #ffe089;
      --text-main: #f7f5ff;
      --text-muted: #9a9fb5;
      --pill-bg: #262936;
      --radius-xl: 28px;
      --radius-lg: 20px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.6);
      --font-main: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Roboto", sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-main);
      background: radial-gradient(circle at top, #252735 0, #05060a 60%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: stretch;
      color: var(--text-main);
    }

    /* Modo claro b√°sico */
    body.light-mode {
      background: radial-gradient(circle at top, #fdf9f0 0, #e1dacb 60%);
    }
    body.light-mode .card-top {
      background: #fdf9f0;
      color: #1b1b1f;
    }
    body.light-mode .card-bottom {
      background: #141417;
    }
    body.light-mode .hero-name {
      color: #141417;
    }
    body.light-mode .hero-desc,
    body.light-mode .hero-meta-row span {
      color: #77757f;
    }

    .app {
      width: 100%;
      max-width: 420px;
      margin: 16px;
      background: transparent;
      display: flex;
      flex-direction: column;
      border-radius: 32px;
      overflow: hidden;
    }

    .card-top {
      background: var(--bg-card-top);
      border-radius: 32px 32px 0 0;
      padding: 14px 18px 20px 18px;
      box-shadow: var(--shadow-soft);
      position: relative;
      z-index: 2;
      color: var(--text-main);
    }

    header {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: 8px;
    }

    .mode-toggle {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: none;
      background: #262938;
      color: #f7f5ff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.5);
      font-size: 17px;
    }

    .title-section {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    h1 {
      font-size: 14px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .hero-name-row {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
    }

    .hero-name {
      font-size: 24px;
      font-weight: 700;
      line-height: 1.1;
      color: #fdfdfd;
    }

    .hero-price {
      font-size: 16px;
      font-weight: 700;
      color: #f7b94a;
    }

    .hero-sub {
      font-size: 13px;
      color: var(--text-muted);
    }

    /* CARRUSEL */

    .hero-carousel-wrap {
      margin: 14px 0 8px;
      position: relative;
    }

    .carousel-viewport {
      position: relative;
      overflow: Hidden;
      padding: 6px 0;
    }

    .carousel-viewport::before,
    .carousel-viewport::after {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      width: 32px;
      pointer-events: none;
      z-index: 3;
    }

    .carousel-viewport::before {
      left: 0;
      background: linear-gradient(
        to right,
        rgba(25,28,36,1) 0%,
        rgba(25,28,36,0) 100%
      );
    }

    .carousel-viewport::after {
      right: 0;
      background: linear-gradient(
        to left,
        rgba(25,28,36,1) 0%,
        rgba(25,28,36,0) 100%
      );
    }

    body.light-mode .carousel-viewport::before {
      background: linear-gradient(
        to right,
        rgba(253,249,240,1) 0%,
        rgba(253,249,240,0) 100%
      );
    }
    body.light-mode .carousel-viewport::after {
      background: linear-gradient(
        to left,
        rgba(253,249,240,1) 0%,
        rgba(253,249,240,0) 100%
      );
    }

    .carousel-track {
      display: flex;
      gap: 14px;
      transition: transform 0.45s ease;
      will-change: transform;
    }

    .slide {
      flex: 0 0 78%;
      border-radius: 28px;
      background: radial-gradient(circle at top, #f6e1c8 0, #d9a66b 60%, #b6793e 100%);
      height: 160px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.45);
      overflow: hidden;
      position: relative;
      transform-origin: center center;
      transition:
        transform 0.35s ease,
        opacity 0.35s ease,
        box-shadow 0.35s ease;
      opacity: 0.25;
      transform: scale(0.9);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slide.active {
      opacity: 1;
      transform: scale(1);
      box-shadow: 0 24px 52px rgba(0,0,0,0.6);
    }

    .slide.prev,
    .slide.next {
      opacity: 0.6;
      transform: scale(0.95);
    }

    .slide img {
      width: 112%;
      height: auto;
      object-fit: cover;
      transform: translateY(4px);
    }

    .slide-label {
      position: absolute;
      left: 10px;
      top: 10px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(10,10,10,0.82);
      font-size: 11px;
      color: #f7f5ff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .slide-label span.badge {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: #ffcf6f;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #3a2b12;
    }

    /* Flechas encima del carrusel */

    .arrow-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: radial-gradient(circle at 30% 20%, #2a2d35 0, #090b10 70%);
      box-shadow: 0 12px 28px rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 4;
      color: #f7f5ff;
      font-size: 18px;
    }

    .arrow-btn:active {
      transform: translateY(-50%) scale(0.95);
    }

    .arrow-prev { left: -4px; }
    .arrow-next { right: -4px; }

    .dots {
      margin-top: 8px;
      display: flex;
      justify-content: center;
      gap: 6px;
      font-size: 0;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #3b3f4a;
      transition: background 0.2s, transform 0.2s;
    }

    .dot.active {
      background: #f0b04a;
      transform: scale(1.4);
    }

    .hero-meta-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .hero-desc {
      font-size: 13px;
      margin-top: 4px;
      color: #c7cadb;
    }

    /* bottom card (oscura) */

    .card-bottom {
      margin-top: -18px;
      background: var(--bg-card-bottom);
      border-radius: 28px;
      padding: 20px 18px 18px;
      color: #f6f5ff;
      box-shadow: 0 -8px 30px rgba(0,0,0,0.5);
    }

    .bottom-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .bottom-header h2 {
      font-size: 15px;
      font-weight: 600;
    }

    .badge-soft {
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.08);
    }

    .product-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 14px;
    }

    .product-row {
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 8px 10px;
      border-radius: 18px;
      background: rgba(255,255,255,0.02);
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    .product-row.active {
      background: rgba(255,255,255,0.16);
      transform: translateY(-1px);
    }

    .product-thumb {
      width: 46px;
      height: 46px;
      border-radius: 18px;
      overflow: hidden;
      background: radial-gradient(circle at top, #f3d7a2 0, #b3743a 70%);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .product-thumb img {
      width: 120%;
      height: auto;
      object-fit: cover;
    }

    .product-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .product-name {
      font-size: 13px;
      font-weight: 600;
    }

    .product-desc {
      font-size: 11px;
      color: #a49fb0;
    }

    .product-meta {
      text-align: right;
      font-size: 11px;
      color: #c3bdce;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .product-meta strong {
      font-size: 13px;
      color: #ffd976;
    }

    .bottom-footer {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .subtotal-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: #d9d4e5;
    }

    .subtotal-row strong {
      font-size: 16px;
      color: #ffffff;
    }

    .cart-row {
      font-size: 11px;
      color: #b6b0cf;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .btn-primary {
      margin-top: 4px;
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 12px 16px;
      font-size: 15px;
      font-weight: 600;
      background: var(--accent);
      color: #161616;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(0,0,0,0.45);
    }

    .btn-primary span.icon {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
      font-size: 16px;
    }

    .points-row {
      font-size: 11px;
      color: #ada6c7;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .points-row span.highlight {
      color: #ffe789;
      font-weight: 600;
    }

    @media (max-width: 360px) {
      .hero-name {
        font-size: 21px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <div class="card-top">
    <header>
      <button class="mode-toggle" id="modeToggle" title="Modo claro/oscuro">üåô</button>
    </header>

    <div class="title-section">
      <h1>Monte Alto ‚Äì Calculadora</h1>
      <div class="hero-name-row">
        <div class="hero-name" id="heroName">Bratwurst</div>
        <div class="hero-price" id="heroPrice">‚Ç°8 900 / kg</div>
      </div>
      <div class="hero-sub" id="heroSub">Suave, mantecoso, estilo alem√°n</div>
    </div>

    <div class="hero-carousel-wrap">
      <div class="carousel-viewport">
        <div class="carousel-track" id="carouselTrack">
          <!-- slides generados por JS -->
        </div>
        <button class="arrow-btn arrow-prev" id="prevBtn" aria-label="Anterior">‚Äπ</button>
        <button class="arrow-btn arrow-next" id="nextBtn" aria-label="Siguiente">‚Ä∫</button>
      </div>
      <div class="dots" id="dots"></div>
    </div>

    <div class="hero-meta-row">
      <span id="heroMeta">Para 3‚Äì4 panes</span>
      <span>500 g sugeridos</span>
    </div>
    <p class="hero-desc" id="heroDesc">
      Suave, jugoso, perfecto para hot dogs premium.
    </p>
  </div>

  <div class="card-bottom">
    <div class="bottom-header">
      <h2>Nuestros productos</h2>
      <span class="badge-soft">Toca para seleccionar</span>
    </div>

    <div class="product-list" id="productList">
      <!-- filas generadas por JS -->
    </div>

    <div class="bottom-footer">
      <div class="subtotal-row">
        <span>Subtotal estimado (500 g)</span>
        <strong id="subtotalDisplay">‚Ç°0</strong>
      </div>
      <div class="cart-row" id="cartRow">
        <span>Carrito: 0 productos</span>
        <span>‚Ç°0</span>
      </div>
      <button class="btn-primary" id="addBtn">
        <span>Agregar al carrito (demo)</span>
        <span class="icon">Ôºã</span>
      </button>
      <div class="points-row">
        <span>Puntos por esta compra:</span>
        <span class="highlight" id="pointsDisplay">0 pts</span>
      </div>
    </div>
  </div>
</div>

<script>
  // Productos Monte Alto ‚Äì laboratorio carrusel
  const PRODUCTS = [
    {
      id: "texmex",
      nombre: "Tex-Mex",
      precioKg: 8500,
      favorito: true,
      picanteIcon: "üå∂üå∂",
      tagline: "Chorizo artesanal picante",
      descHero: "Molienda fresca con especias tostadas y un toque ahumado.",
      descCorta: "Especiado, ahumado y ligeramente picante.",
      rinde: "Rinde 3‚Äì4 porciones",
      img: "Tex-Mex.png"
    },
    {
      id: "caribeno",
      nombre: "Caribe√±o",
      precioKg: 8700,
      favorito: false,
      picanteIcon: "üå∂",
      tagline: "Coco natural + chile paname√±o",
      descHero: "Ajo fresco, coco natural y chile paname√±o estilo costero.",
      descCorta: "Toque caribe√±o con coco y chile paname√±o.",
      rinde: "Perfecto para 3 platos",
      img: "Caribe√±o.png"
    },
    {
      id: "tico",
      nombre: "Tico Casero",
      precioKg: 8300,
      favorito: true,
      picanteIcon: "üá®üá∑",
      tagline: "Achiote, ajo y tradici√≥n local",
      descHero: "Receta casera con achiote, ajo fresco y especias ticas.",
      descCorta: "Sabor tico cl√°sico para desayuno y chorip√°n.",
      rinde: "Ideal para desayunos y choripanes",
      img: "Criollo.png"
    },
    {
      id: "argentino",
      nombre: "Criollo Argentino",
      precioKg: 8300,
      favorito: true,
      picanteIcon: "ü•©",
      tagline: "Cl√°sico para parrilla",
      descHero: "Posta y panceta en equilibrio, sabor limpio y jugoso.",
      descCorta: "Cl√°sico parrillero, mezcla de posta y panceta.",
      rinde: "Ideal para la parrilla",
      img: "Argentino.png"
    },
    {
      id: "bratwurst",
      nombre: "Bratwurst",
      precioKg: 8900,
      favorito: false,
      picanteIcon: "ü•®",
      tagline: "Suave, mantecoso, estilo alem√°n",
      descHero: "Suave, jugoso, perfecto para hot dogs premium.",
      descCorta: "Suave estilo alem√°n para panes.",
      rinde: "Para 3‚Äì4 panes",
      img: "Bratwurst.png"
    },
    {
      id: "tocineta",
      nombre: "Tocineta Ahumada",
      precioKg: 10000,
      favorito: false,
      picanteIcon: "ü•ì",
      tagline: "Laminada, ahumada en fr√≠o",
      descHero: "Tocineta ahumada lentamente, ideal para desayunos y burgers.",
      descCorta: "L√°minas ahumadas para todo.",
      rinde: "Rinde varias preparaciones",
      img: "Tocineta.png"
    },
    {
      id: "combo",
      nombre: "Combo surtido Monte Alto",
      precioKg: 0,
      favorito: true,
      picanteIcon: "‚≠ê",
      tagline: "500 g de cada chorizo",
      descHero: "Degustaci√≥n completa: 500 g de cada chorizo Monte Alto.",
      descCorta: "Pack de 2.5 kg para compartir.",
      rinde: "Ideal para parrilladas y regalos",
      img: "Combo.png"
    }
  ];

  const HERO_NAME = document.getElementById("heroName");
  const HERO_PRICE = document.getElementById("heroPrice");
  const HERO_SUB = document.getElementById("heroSub");
  const HERO_META = document.getElementById("heroMeta");
  const HERO_DESC = document.getElementById("heroDesc");

  const track = document.getElementById("carouselTrack");
  const dotsContainer = document.getElementById("dots");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");

  const PRODUCT_LIST = document.getElementById("productList");
  const SUBTOTAL_DISPLAY = document.getElementById("subtotalDisplay");
  const POINTS_DISPLAY = document.getElementById("pointsDisplay");
  const ADD_BTN = document.getElementById("addBtn");
  const CART_ROW = document.getElementById("cartRow");
  const MODE_TOGGLE = document.getElementById("modeToggle");

  let currentIndex = 0;
  let slides = [];
  const gapPx = 14;
  const gramosBase = 500;
  const colonesPorPunto = 100;

  const cart = [];

  function formatoColones(valor) {
    return "‚Ç°" + valor.toLocaleString("es-CR");
  }

  function calcularSubtotal(prod, gramos) {
    if (!prod.precioKg || prod.precioKg <= 0) return 0;
    return Math.round(prod.precioKg * (gramos / 1000));
  }

  /* ----- CARRUSEL ----- */

  function createSlides() {
    PRODUCTS.forEach((p, idx) => {
      const slide = document.createElement("div");
      slide.className = "slide";
      slide.dataset.index = idx.toString();

      slide.innerHTML = `
        <span class="slide-label">
          <span class="badge">${p.picanteIcon || "‚òÖ"}</span>
          ${p.favorito ? "Favorito" : "Monte Alto"}
        </span>
        <img src="${p.img}" alt="${p.nombre}">
      `;

      slide.addEventListener("click", () => {
        const index = Number(slide.dataset.index);
        if (index !== currentIndex) {
          currentIndex = index;
          updateUI();
        }
      });

      track.appendChild(slide);
    });

    slides = Array.from(track.querySelectorAll(".slide"));

    PRODUCTS.forEach((_p, idx) => {
      const d = document.createElement("div");
      d.className = "dot";
      d.dataset.index = idx.toString();
      d.addEventListener("click", () => {
        currentIndex = idx;
        updateUI();
      });
      dotsContainer.appendChild(d);
    });
  }

  function updateCarouselClasses() {
    slides.forEach(s => s.classList.remove("active","prev","next"));
    const total = slides.length;
    const prevIdx = (currentIndex - 1 + total) % total;
    const nextIdx = (currentIndex + 1) % total;

    slides[currentIndex].classList.add("active");
    slides[prevIdx].classList.add("prev");
    slides[nextIdx].classList.add("next");
  }

  function updateDots() {
    const dots = Array.from(dotsContainer.querySelectorAll(".dot"));
    dots.forEach((d, idx) => {
      d.classList.toggle("active", idx === currentIndex);
    });
  }

function updateTrackPosition() {
  if (!slides.length) return;

  const first = slides[0];
  const slideWidth = first.getBoundingClientRect().width;
  const viewport = document.querySelector(".carousel-viewport");
  const viewportWidth = viewport.getBoundingClientRect().width;

  // cu√°nto espacio sobra a los lados del slide dentro del viewport
  const extra = (viewportWidth - slideWidth) / 2;

  // centramos el slide actual y dejamos un poquito de vecino
  const offset = currentIndex * (slideWidth + gapPx) - extra;

  track.style.transform = `translateX(-${offset}px)`;
}

  /* ----- LISTA INFERIOR ----- */

  function renderProductList() {
    PRODUCT_LIST.innerHTML = "";
    PRODUCTS.forEach((prod, idx) => {
      const row = document.createElement("div");
      row.className = "product-row";
      row.dataset.index = idx.toString();

      const thumb = document.createElement("div");
      thumb.className = "product-thumb";
      const img = document.createElement("img");
      img.src = prod.img;
      img.alt = prod.nombre;
      thumb.appendChild(img);

      const info = document.createElement("div");
      info.className = "product-info";
      const name = document.createElement("div");
      name.className = "product-name";
      name.textContent = prod.nombre;
      const desc = document.createElement("div");
      desc.className = "product-desc";
      desc.textContent = prod.descCorta;
      info.appendChild(name);
      info.appendChild(desc);

      const meta = document.createElement("div");
      meta.className = "product-meta";
      const price = document.createElement("div");
      price.innerHTML = prod.precioKg > 0
        ? `<strong>${formatoColones(prod.precioKg)}</strong>`
        : `<strong>Combo</strong>`;
      const rinde = document.createElement("div");
      rinde.textContent = prod.rinde;
      meta.appendChild(price);
      meta.appendChild(rinde);

      row.appendChild(thumb);
      row.appendChild(info);
      row.appendChild(meta);

      row.addEventListener("click", () => {
        currentIndex = idx;
        updateUI();
      });

      PRODUCT_LIST.appendChild(row);
    });
  }

  function marcarFilaActiva() {
    const rows = PRODUCT_LIST.querySelectorAll(".product-row");
    rows.forEach((r, idx) => {
      r.classList.toggle("active", idx === currentIndex);
    });
  }

  /* ----- HERO + SUBTOTAL/PUNTOS ----- */

  function updateHero() {
    const prod = PRODUCTS[currentIndex];
    HERO_NAME.textContent = prod.nombre;
    HERO_PRICE.textContent = prod.precioKg > 0
      ? `${formatoColones(prod.precioKg)} / kg`
      : "Combo surtido";
    HERO_SUB.textContent = prod.tagline || "Producto Monte Alto";
    HERO_META.textContent = prod.rinde;
    HERO_DESC.textContent = prod.descHero;

    const subtotal = calcularSubtotal(prod, gramosBase);
    SUBTOTAL_DISPLAY.textContent = subtotal > 0
      ? formatoColones(subtotal)
      : "Seg√∫n detalle de combo";

    const puntos = Math.floor(subtotal / colonesPorPunto);
    POINTS_DISPLAY.textContent = puntos + " pts";
  }

  /* ----- CARRITO (sin alert) ----- */

  function updateCartRow() {
    const totalProductos = cart.length;
    const totalColones = cart.reduce((sum, item) => sum + item.subtotal, 0);
    CART_ROW.firstElementChild.textContent = `Carrito: ${totalProductos} producto${totalProductos !== 1 ? "s" : ""}`;
    CART_ROW.lastElementChild.textContent = formatoColones(totalColones);
  }

  ADD_BTN.addEventListener("click", () => {
    const prod = PRODUCTS[currentIndex];
    const subtotal = calcularSubtotal(prod, gramosBase);
    cart.push({
      id: prod.id,
      nombre: prod.nombre,
      gramos: gramosBase,
      subtotal
    });
    updateCartRow();
    console.log("Carrito (demo):", cart);
  });

  /* ----- CONTROL FLECHAS, MODO Y RESIZE ----- */

  prevBtn.addEventListener("click", () => {
    currentIndex = (currentIndex - 1 + PRODUCTS.length) % PRODUCTS.length;
    updateUI();
  });

  nextBtn.addEventListener("click", () => {
    currentIndex = (currentIndex + 1) % PRODUCTS.length;
    updateUI();
  });

  window.addEventListener("resize", () => {
    updateTrackPosition();
  });

  MODE_TOGGLE.addEventListener("click", () => {
    document.body.classList.toggle("light-mode");
    const isLight = document.body.classList.contains("light-mode");
    MODE_TOGGLE.textContent = isLight ? "‚òÄ" : "üåô";
  });

  /* ----- ORQUESTA FINAL ----- */

  function updateUI() {
    updateCarouselClasses();
    updateDots();
    updateTrackPosition();
    updateHero();
    marcarFilaActiva();
  }

  // inicializaci√≥n
  createSlides();
  renderProductList();
  updateUI();
  updateCartRow();
</script>
</body>
</html>

